---
title: "Fundamentos de R"
output: html_notebook
---

# Caso práctico 2
Mediante los siguientes datos, sobre los que se simulará información aleatoria para los años comprendidos entre 2016 y 2020:

vec.1 <- sample(1:100, 100, replace = T)
vec.2 <- sample(50:150, 100, replace = T)
vec.3 <- rep(c("2020", "2019", "2018", "2017", "2016"), 20)

1. Crea una matriz de dos columnas con los vectores “vec.1” y “vec.2”.
2. Crea un nuevo vector que sea la suma de las filas de la matriz al cuadrado.
3.  Crea un dataframe con todos los vectores con las siguientes columnas:
    - vec.1: Low.
    - vec.2: High.
    - Vector del apartado 2: Volume.
    - vec.3: Year (tiene que ser una variable factor).
4. Muestra el resumen estadístico del dataframe.
5. Muestra la estructura de variables del dataframe.
6. Asigna valor nulo (NA) a todos los valores de la columna “Low” por debajo de 20.
7. Muestra el número de valores nulos de cada columna.
8. Muestra la media de la columna “Volume” en función de cada factor de “Year”.
9. Asigna a cada valor “NaN” la media de la columna “Low” (pista: investigar en la función “mean” cómo trabajar con nulos).
10. Obtén un subconjunto de los datos que sean todos los valores de 2020 y que tengan valor superior a 90 en la columna “High”.
11. Investiga sobre la función “write.csv” y crea un archivo CSV con nombre “2020_Values.csv”.

```{r}
#Cargar los vectores
vec.1 <- sample(1:100, 100, replace = T)
vec.2 <- sample(50:150, 100, replace = T)
vec.3 <- rep(c("2020", "2019", "2018", "2017", "2016"), 20)
```

1. Crea una matriz de dos columnas con los vectores “vec.1” y “vec.2”.
```{r}
mat <- matrix(c(vec.1,vec.2), nrow=length(vec.1) ,ncol=2, byrow = T)
mat[1:10,]
```
2. Crea un nuevo vector que sea la suma de las filas de la matriz al cuadrado.
```{r}
volume <-apply(mat, 1, sum)^2
volume[0:10]
```
3.  Crea un dataframe con todos los vectores con las siguientes columnas:
    - vec.1: Low.
    - vec.2: High.
    - Vector del apartado 2: Volume.
    - vec.3: Year (tiene que ser una variable factor).
```{r}
df <- data.frame("Low" = vec.1, "High" = vec.2, "Volume" = volume, "Year" = as.factor(vec.3))
head(df)
```
4. Muestra el resumen estadístico del dataframe.
```{r}
summary(df)
```
5. Muestra la estructura de variables del dataframe.
```{r}
str(df)
```
6. Asigna valor nulo (NA) a todos los valores de la columna “Low” por debajo de 20.
```{r}
df[df$Low < 20, "Low"] <- NA

summary(df)
```
7. Muestra el número de valores nulos de cada columna.
```{r}
apply(is.na(df), 2, sum)
```
8. Muestra la media de la columna “Volume” en función de cada factor de “Year”.
```{r}
tapply(df$Volume, df$Year, mean)
```
9. Asigna a cada valor “NaN” la media de la columna “Low” (pista: investigar en la función “mean” cómo trabajar con nulos).
```{r}
df$Low[which(is.na(df$Low))] <- mean(df$Low, na.rm=T)
summary(df)

```
10. Obtén un subconjunto de los datos que sean todos los valores de 2020 y que tengan valor superior a 90 en la columna “High”.
```{r}
year.values <- df[df$High > 90 & df$Year == "2020",]
year.values
```
* 11. Investiga sobre la función **`write.csv`**, crea un archivo csv con nombre "2020_Values.csv"
```{r}
write.csv2(year.values, file = "2020_Values.csv", row.names = F)
```

